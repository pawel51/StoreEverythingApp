<!DOCTYPE HTML>
<html layout:decorate="~{fragments/main_layout}" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <meta charset="UTF-8">
    <title>Note</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" th:href="@{/css/site.css}"/>
</head>
<body>
<script th:inline="javascript">
    function myFunction() {
        /* Get the text field */
        var copyText = document.getElementById("linkInput");

        /* Select the text field */
        copyText.select();
        copyText.setSelectionRange(0, 99999); /* For mobile devices */

        /* Copy the text inside the text field */
        navigator.clipboard.writeText(copyText.value);

        /* Alert the copied text */
        alert("Copied the text: " + copyText.value);
    }
</script>
<div th:replace="fragments/common :: navigationBar"></div>
<div layout:fragment="content">
    <div class="row">
        <div class="col-6">
            <div class="nav-item"
                 th:if="${#authentication.getPrincipal().getUsername()} == ${note.getOwner().getUsername()}">
                <h3>Shared note is available at</h3>
                <input id="linkInput" th:value="${link}" size="50" readonly>
                <button onclick="myFunction()">Copy</button>
            </div>
        </div>
        <hr/>
    </div>
</div>
</body>
</html>